webpackJsonp([5],{"5aD5":function(e,t,l){(e.exports=l("FZ+f")(!1)).push([e.i,"\n.yangshi {\n    background-color: #FF0000;\n}\n.el-table .cell {\n       white-space: pre-wrap;\n}\n.el-checkbox {\n    text-align: right;\n    width: 100%;\n    padding-right: 10px;\n}\npre {\n    white-space: pre-wrap;\n    word-wrap: break-word;\n}\n",""])},"7dMp":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("mvHQ"),c=l.n(a),n=l("G87+"),r=l("hR3u"),s={name:"mysql_cmd",inject:["reload"],data:function(){return{host:"",list1:[{key:"ID"},{key:"USER"},{key:"HOST"},{key:"DB"},{key:"COMMAND"},{key:"TIME"},{key:"STATE"},{key:"INFO"},{key:"result"}],total:1e3,pagesize:50,currentPage:1,list2:[],yangshi:!1,type_list:[{type:"master"},{type:"slave"}],type_list2:[{type:"linux_cmd"},{type:"mysql_cmd"}],select_aa:{cmd_type:"",host:[],cmd:""},zhuangtai:"",dblist2:[],multipleSelection:[],editform:!1,logg:[]}},created:function(){var e=this;Object(r.e)().then(function(t){console.log(c()(t.data));for(var l=0,a=t.data.length;l<a;l++)t.data[l].cmd_result=t.data[l].cmd_result.replace("[","").replace("]","").replace('"',"").replace(/'/g,"").replace(/,/g,"").replace(/[\\n]/g,"\n");e.logg=t.data,console.log(e.logg)})},methods:{selectAll:function(){var e=this;this.selectedArray=[],this.checked?this.dblist2.map(function(t){e.selectedArray.push(t.name)}):this.selectedArray=[]},changeSelect:function(e){e.length===this.dblist2.length?this.checked=!0:this.checked=!1},selectGet:function(){var e=this;this.select_aa.type="slave",Object(n.g)(this.select_aa.type).then(function(t){e.dblist2=t.data}).catch(function(e){alert(e)})},execute_cmd:function(){var e=this;Object(r.d)(this.select_aa).then(function(t){e.dblist2=t.data}).catch(function(e){alert(e)})},select_cmd:function(){this.editform=!0}}},i={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-form",{ref:"select_aa",attrs:{id:"#select_aa",model:e.select_aa,"label-width":"80px"}},[l("el-form-item",{staticStyle:{"margin-bottom":"10px",width:"50%"},attrs:{label:"类型:",prop:"string"}},[l("el-select",{staticStyle:{"margin-bottom":"10px",width:"50%"},model:{value:e.select_aa.cmd_type,callback:function(t){e.$set(e.select_aa,"cmd_type",t)},expression:"select_aa.cmd_type"}},e._l(e.type_list2,function(e,t){return l("el-option",{key:t,attrs:{label:e.type,value:e.type}})}),1)],1),e._v(" "),l("el-form-item",{staticStyle:{"margin-bottom":"10px",width:"50%"},attrs:{label:"主机名:",prop:"string"}},[l("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:e.changeSelect},nativeOn:{click:function(t){return e.selectGet(t)}},model:{value:e.select_aa.host,callback:function(t){e.$set(e.select_aa,"host",t)},expression:"select_aa.host"}},e._l(e.dblist2,function(e,t){return l("el-option",{key:t,attrs:{label:e.host,value:e.host}})}),1)],1),e._v(" "),l("el-form-item",{staticStyle:{"margin-bottom":"10px",width:"50%"},attrs:{label:"命令:",prop:"string"}},[l("el-input",{model:{value:e.select_aa.cmd,callback:function(t){e.$set(e.select_aa,"cmd",t)},expression:"select_aa.cmd"}})],1)],1),e._v(" "),l("el-button",{nativeOn:{click:function(t){return e.execute_cmd()}}},[e._v("执行命令")]),e._v(" "),l("el-button",{nativeOn:{click:function(t){return e.select_cmd()}}},[e._v("查看命令")]),e._v("\n    <"),l("el-dialog",{staticClass:"dialog-wrap",attrs:{title:"查看命令列表",visible:e.editform,"append-to-body":!1},on:{"update:visible":function(t){e.editform=t}}},[l("p",[e._v("统计 慢日志   cat /data/mysql/arch_slow_log/slowquery_20200108*|grep Row|awk '$3>10'")]),e._v(" "),l("p",[e._v('添加 开机启动 echo "/data/scripts/lvs_read.sh start" >> /etc/rc.d/rc.local')]),e._v(" "),l("p",[e._v("摘掉 ipvs     ipvsadm -e -t vip:3306  -r ip -w 0")]),e._v(" "),l("p",[e._v("  GRANT SELECT, REPLICATION SLAVE,REPLICATION CLIENT ON *.* TO 'pro_read_cc'@'10.10.%' IDENTIFIED BY PASSWORD '*FE3359AADA603971CAF334508754A8C19E0DF422';")]),l("p"),l("p",[e._v(" GRANT SELECT, INSERT, UPDATE, DELETE, CREATE,PROCESS, ALTER, SUPER, REPLICATION SLAVE, REPLICATION CLIENT, TRIGGER,DROP ON *.* TO 'pro_godder'@'10.10.%' IDENTIFIED BY PASSWORD '*01C186D17AC131818D3853949B6690E8985AC49D'; ")]),l("p"),l("p",[e._v("  GRANT SELECT, PROCESS, SUPER, REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO 'pro_minitor'@'10.10.%' IDENTIFIED BY PASSWORD '*F5C6445FC5185AEEC276904BE1D236AD4114CE90' ")]),e._v(" "),l("p",[e._v(" 主从同步语句  CHANGE MASTER TO MASTER_HOST='10.255.53.157',MASTER_USER='repl',MASTER_PASSWORD='replmobile', MASTER_LOG_FILE='',master_log_pos= ;")])]),e._v(" "),l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:e.logg||[]}},[l("el-table-column",{attrs:{prop:"host",label:"主机"}}),e._v(" "),l("el-table-column",{attrs:{prop:"cmd",label:"执行命令"}}),e._v(" "),l("el-table-column",{attrs:{prop:"cmd_status",label:"执行状态"}}),e._v(" "),l("el-table-column",{attrs:{prop:"cmd_error",label:"执行状态"}}),e._v(" "),l("el-table-column",{attrs:{prop:"cmd_result",label:"执行结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("pre",[e._v(e._s(t.row.cmd_result))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"riqi",label:"日期"}})],1)],1)},staticRenderFns:[]};var o=l("VU/8")(s,i,!1,function(e){l("vgTr")},null,null);t.default=o.exports},mvHQ:function(e,t,l){e.exports={default:l("qkKv"),__esModule:!0}},qkKv:function(e,t,l){var a=l("FeBl"),c=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return c.stringify.apply(c,arguments)}},vgTr:function(e,t,l){var a=l("5aD5");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);l("rjj0")("2c6f993c",a,!0,{})}});