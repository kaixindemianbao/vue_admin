webpackJsonp([7],{"7G7r":function(t,e,a){var l=a("L/VY");"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);a("rjj0")("1ba7779c",l,!0,{})},"L/VY":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.yangshi {\n  background-color: #FF0000;\n}\n",""])},ZbHw:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("hR3u"),i=a("G87+"),n={name:"mysql_process",inject:["reload"],data:function(){return{host:"",list1:[{key:"ID"},{key:"USER"},{key:"HOST"},{key:"DB"},{key:"COMMAND"},{key:"TIME"},{key:"STATE"},{key:"INFO"},{key:"result"}],total:1e3,pagesize:50,currentPage:1,list2:[],lock_data:[],lock_title:[],total_data:[],total_title:[],ip_data:[],db_data:[],db_title:[],xianshi1:!1,xianshi2:!1,xianshi3:!1,xianshi4:!1,xianshi5:!1,totoal_1:"",yangshi:!1,type_list:[{type:"master"},{type:"slave"}],select_aa:{type:"",hostname:"",port:""},zhuangtai:"",dblist2:[],multipleSelection:[],zhuangtai2:""}},created:function(){this.select_aa.port=3306},methods:{handleSelectionChange:function(t){this.multipleSelection=t},current_change:function(t){this.currentPage=t},stop:function(t){var e=this;console.log(this.multipleSelection),Object(l.h)(this.select_aa.host,this.select_aa.port,this.multipleSelection).then(function(t){e.zhuangtai=t.data}).catch(function(t){alert(t)})},chuli:function(t){return"Waiting for table metadata lock"===t||"copy to tmp table"===t},selectGet:function(){var t=this;console.log(this.select_aa.type),Object(i.g)(this.select_aa.type).then(function(e){t.dblist2=e.data}).catch(function(t){alert(t)})},info:function(){console.log("测试测试"),this.xianshi5=!0},chakan:function(){var t=this;this.zhuangtai2=!0,Object(l.c)(this.select_aa.host,this.select_aa.port).then(function(e){e.data.processlist.data&&(t.xianshi1=!0,t.list2=e.data.processlist.data,t.total_1=e.data.processlist.len),e.data.lock.data&&(t.xianshi2=!0,t.lock_title=e.data.lock.title,t.lock_data=e.data.lock.data),e.data.DbTotal.data&&(t.xianshi3=!0,t.db_data=e.data.DbTotal.data,t.db_title=e.data.DbTotal.title),e.data.Total.data&&(t.xianshi4=!0,t.total_data=e.data.Total.data,t.total_title=e.data.Total.title),e.data.ip_info.data&&(t.ip_data=e.data.ip_info.data,console.log("是否使用方法"))})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{ref:"select_aa",attrs:{id:"#select_aa",model:t.select_aa,"label-width":"80px"}},[a("el-form-item",{staticStyle:{"margin-bottom":"10px",width:"50%"},attrs:{label:"类型:",prop:"string"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:t.select_aa.type,callback:function(e){t.$set(t.select_aa,"type",e)},expression:"select_aa.type"}},t._l(t.type_list,function(t,e){return a("el-option",{key:e,attrs:{label:t.type,value:t.type}})}),1)],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"10px",width:"50%"},attrs:{label:"主机名:",prop:"string"}},[a("el-select",{staticStyle:{width:"100%"},nativeOn:{click:function(e){return t.selectGet(e)}},model:{value:t.select_aa.host,callback:function(e){t.$set(t.select_aa,"host",e)},expression:"select_aa.host"}},t._l(t.dblist2,function(t,e){return a("el-option",{key:e,attrs:{label:t.host,value:t.host}})}),1)],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"50px",width:"50%"},attrs:{label:"端口"}},[a("el-input",{attrs:{autosize:"",type:"number",defaultVal:"3306"},model:{value:t.select_aa.port,callback:function(e){t.$set(t.select_aa,"port",e)},expression:"select_aa.port"}})],1)],1),t._v(" "),a("el-button",{on:{click:t.chakan}},[t._v("查看数据库状态")]),t._v(" "),a("p",[t._v(" 查看数据库线程状态")]),t._v(" "),t.xianshi1?a("el-table",{ref:"multipleTable",attrs:{data:(t.list2||[]).slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize)},on:{"selection-change":t.handleSelectionChange}},[t._v('  style="width: 100%" >\n        '),a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ID",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"USER",label:"USER"}}),t._v(" "),a("el-table-column",{attrs:{prop:"HOST",label:"HOST"}}),t._v(" "),a("el-table-column",{attrs:{prop:"DB",label:"DB"}}),t._v(" "),a("el-table-column",{attrs:{prop:"COMMAND",label:"COMMAND"}}),t._v(" "),a("el-table-column",{attrs:{prop:"TIME",label:"TIME"}}),t._v(" "),a("el-table-column",{attrs:{label:"STATE"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:{yangshi:t.chuli(e.row.STATE)}},[t._v(t._s(e.row.STATE))])]}}],null,!1,2256162301)}),t._v(" "),a("el-table-column",{attrs:{prop:"INFO",label:"INFO","show-overflow-tooltip":!0}})],1):t._e(),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[t.zhuangtai2?a("el-button",{on:{click:function(e){return t.stop()}}},[t._v("终止会话")]):t._e(),t._v(" "),a("el-row",[t._v(t._s(t.zhuangtai))])],1),t._v(" "),a("p",[t._v("查看DB线程数量")]),t._v(" "),t.xianshi3?a("el-table",{ref:"multipleTable1",staticStyle:{width:"100%"},attrs:{data:(t.db_data||[]).slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize)}},t._l(t.db_title,function(e,l){return a("el-table-column",{key:l,attrs:{label:e.ziduan,width:e.width},scopedSlots:t._u([{key:"default",fn:function(l){return[a("span",[t._v(t._s(l.row[e.key]))])]}}],null,!0)})}),1):t._e(),t._v(" "),a("p",[t._v("查看总运行线程数")]),t._v(" "),t.xianshi4?a("el-table",{ref:"multipleTable2",staticStyle:{width:"100%"},attrs:{data:(t.total_data||[]).slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize)}},t._l(t.total_title,function(e,l){return a("el-table-column",{key:l,attrs:{label:e.ziduan,width:e.width},scopedSlots:t._u([{key:"default",fn:function(l){return[a("span",[t._v(t._s(l.row[e.key]))])]}}],null,!0)})}),1):t._e(),t._v(" "),a("p",[t._v("查看锁持有事务信息,包含未提交事务")]),t._v(" "),t.xianshi4?a("el-table",{ref:"multipleTable",attrs:{data:(t.lock_data||[]).slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize)},on:{"selection-change":t.handleSelectionChange}},[t._v('  style="width: 100%" >\n       '),a("el-table-column",{attrs:{prop:"trx_id",label:"事务ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"trx_started",label:"事务开启日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"trx_state",label:"事务状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"trx_query","show-overflow-tooltip":!0,label:"事务查询语句"}})],1):t._e(),t._v(" "),a("p",[t._v("IP-HOST详细对应")]),t._v(" "),a("el-button",{nativeOn:{click:function(e){return t.info()}}},[t._v("详细查询")]),t._v(" "),t.xianshi5?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.ip_data}},[a("el-table-column",{attrs:{prop:"DB",label:"数据库"}}),t._v(" "),a("el-table-column",{attrs:{prop:"HOST",label:"应用服务器"}})],1):t._e()],1)},staticRenderFns:[]};var s=a("VU/8")(n,o,!1,function(t){a("7G7r")},null,null);e.default=s.exports}});